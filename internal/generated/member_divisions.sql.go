// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: member_divisions.sql

package generated

import (
	"context"
	"database/sql"

	"github.com/google/uuid"
)

const deleteMemberDivision = `-- name: DeleteMemberDivision :exec
DELETE FROM member_divisions
WHERE id = $1
`

func (q *Queries) DeleteMemberDivision(ctx context.Context, id uuid.UUID) error {
	_, err := q.exec(ctx, q.deleteMemberDivisionStmt, deleteMemberDivision, id)
	return err
}

const getMemberDivisionsByDivisionID = `-- name: GetMemberDivisionsByDivisionID :many
SELECT member_divisions.id, member_id, division_id, role_title, member_divisions.created_at, members.id, name, npm, photo_media_id, bio, email, phone, instagram_url, period_start, period_end, is_active, members.created_at, updated_at
FROM member_divisions
INNER JOIN members ON member_divisions.member_id = members.id
WHERE division_id = $1
`

type GetMemberDivisionsByDivisionIDRow struct {
	ID           uuid.UUID      `json:"id"`
	MemberID     uuid.NullUUID  `json:"member_id"`
	DivisionID   uuid.NullUUID  `json:"division_id"`
	RoleTitle    sql.NullString `json:"role_title"`
	CreatedAt    sql.NullTime   `json:"created_at"`
	ID_2         uuid.UUID      `json:"id_2"`
	Name         sql.NullString `json:"name"`
	Npm          sql.NullString `json:"npm"`
	PhotoMediaID uuid.NullUUID  `json:"photo_media_id"`
	Bio          sql.NullString `json:"bio"`
	Email        sql.NullString `json:"email"`
	Phone        sql.NullString `json:"phone"`
	InstagramUrl sql.NullString `json:"instagram_url"`
	PeriodStart  interface{}    `json:"period_start"`
	PeriodEnd    interface{}    `json:"period_end"`
	IsActive     sql.NullBool   `json:"is_active"`
	CreatedAt_2  sql.NullTime   `json:"created_at_2"`
	UpdatedAt    sql.NullTime   `json:"updated_at"`
}

func (q *Queries) GetMemberDivisionsByDivisionID(ctx context.Context, divisionID uuid.NullUUID) ([]GetMemberDivisionsByDivisionIDRow, error) {
	rows, err := q.query(ctx, q.getMemberDivisionsByDivisionIDStmt, getMemberDivisionsByDivisionID, divisionID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []GetMemberDivisionsByDivisionIDRow{}
	for rows.Next() {
		var i GetMemberDivisionsByDivisionIDRow
		if err := rows.Scan(
			&i.ID,
			&i.MemberID,
			&i.DivisionID,
			&i.RoleTitle,
			&i.CreatedAt,
			&i.ID_2,
			&i.Name,
			&i.Npm,
			&i.PhotoMediaID,
			&i.Bio,
			&i.Email,
			&i.Phone,
			&i.InstagramUrl,
			&i.PeriodStart,
			&i.PeriodEnd,
			&i.IsActive,
			&i.CreatedAt_2,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getMemberDivisionsByMemberID = `-- name: GetMemberDivisionsByMemberID :many
SELECT member_divisions.id, member_id, division_id, role_title, member_divisions.created_at, divisions.id, name, slug, description, icon_media_id, coordinator_id, is_active, divisions.created_at, updated_at
FROM member_divisions
INNER JOIN divisions ON member_divisions.division_id = divisions.id
WHERE member_id = $1
`

type GetMemberDivisionsByMemberIDRow struct {
	ID            uuid.UUID      `json:"id"`
	MemberID      uuid.NullUUID  `json:"member_id"`
	DivisionID    uuid.NullUUID  `json:"division_id"`
	RoleTitle     sql.NullString `json:"role_title"`
	CreatedAt     sql.NullTime   `json:"created_at"`
	ID_2          uuid.UUID      `json:"id_2"`
	Name          sql.NullString `json:"name"`
	Slug          sql.NullString `json:"slug"`
	Description   sql.NullString `json:"description"`
	IconMediaID   uuid.NullUUID  `json:"icon_media_id"`
	CoordinatorID uuid.NullUUID  `json:"coordinator_id"`
	IsActive      sql.NullBool   `json:"is_active"`
	CreatedAt_2   sql.NullTime   `json:"created_at_2"`
	UpdatedAt     sql.NullTime   `json:"updated_at"`
}

func (q *Queries) GetMemberDivisionsByMemberID(ctx context.Context, memberID uuid.NullUUID) ([]GetMemberDivisionsByMemberIDRow, error) {
	rows, err := q.query(ctx, q.getMemberDivisionsByMemberIDStmt, getMemberDivisionsByMemberID, memberID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []GetMemberDivisionsByMemberIDRow{}
	for rows.Next() {
		var i GetMemberDivisionsByMemberIDRow
		if err := rows.Scan(
			&i.ID,
			&i.MemberID,
			&i.DivisionID,
			&i.RoleTitle,
			&i.CreatedAt,
			&i.ID_2,
			&i.Name,
			&i.Slug,
			&i.Description,
			&i.IconMediaID,
			&i.CoordinatorID,
			&i.IsActive,
			&i.CreatedAt_2,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const insertMemberDivision = `-- name: InsertMemberDivision :one
INSERT INTO member_divisions (member_id, division_id, role_title)
VALUES ($1, $2, $3)
RETURNING id, member_id, division_id, role_title, created_at
`

type InsertMemberDivisionParams struct {
	MemberID   uuid.NullUUID  `json:"member_id"`
	DivisionID uuid.NullUUID  `json:"division_id"`
	RoleTitle  sql.NullString `json:"role_title"`
}

func (q *Queries) InsertMemberDivision(ctx context.Context, arg InsertMemberDivisionParams) (MemberDivision, error) {
	row := q.queryRow(ctx, q.insertMemberDivisionStmt, insertMemberDivision, arg.MemberID, arg.DivisionID, arg.RoleTitle)
	var i MemberDivision
	err := row.Scan(
		&i.ID,
		&i.MemberID,
		&i.DivisionID,
		&i.RoleTitle,
		&i.CreatedAt,
	)
	return i, err
}
