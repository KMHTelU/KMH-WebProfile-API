// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: gallery_items.sql

package generated

import (
	"context"
	"database/sql"

	"github.com/google/uuid"
)

const deleteGalleryItem = `-- name: DeleteGalleryItem :exec
DELETE FROM gallery_items
WHERE id = $1
`

func (q *Queries) DeleteGalleryItem(ctx context.Context, id uuid.UUID) error {
	_, err := q.exec(ctx, q.deleteGalleryItemStmt, deleteGalleryItem, id)
	return err
}

const insertGalleryItem = `-- name: InsertGalleryItem :one
INSERT INTO gallery_items (
  id,
  gallery_id,
  media_id,
  sort_order
) VALUES (
  $1, $2, $3, $4
)
RETURNING id, gallery_id, media_id, sort_order
`

type InsertGalleryItemParams struct {
	ID        uuid.UUID     `json:"id"`
	GalleryID uuid.NullUUID `json:"gallery_id"`
	MediaID   uuid.NullUUID `json:"media_id"`
	SortOrder sql.NullInt32 `json:"sort_order"`
}

func (q *Queries) InsertGalleryItem(ctx context.Context, arg InsertGalleryItemParams) (GalleryItem, error) {
	row := q.queryRow(ctx, q.insertGalleryItemStmt, insertGalleryItem,
		arg.ID,
		arg.GalleryID,
		arg.MediaID,
		arg.SortOrder,
	)
	var i GalleryItem
	err := row.Scan(
		&i.ID,
		&i.GalleryID,
		&i.MediaID,
		&i.SortOrder,
	)
	return i, err
}

const selectGalleryItemsByGalleryID = `-- name: SelectGalleryItemsByGalleryID :many
SELECT gallery_items.id, gallery_id, media_id, sort_order, media.id, file_name, file_type, mime_type, file_size, url, alt_text, caption, uploaded_by, created_at
FROM gallery_items
INNER JOIN media ON gallery_items.media_id = media.id
WHERE gallery_id = $1
ORDER BY sort_order ASC
`

type SelectGalleryItemsByGalleryIDRow struct {
	ID         uuid.UUID      `json:"id"`
	GalleryID  uuid.NullUUID  `json:"gallery_id"`
	MediaID    uuid.NullUUID  `json:"media_id"`
	SortOrder  sql.NullInt32  `json:"sort_order"`
	ID_2       uuid.UUID      `json:"id_2"`
	FileName   sql.NullString `json:"file_name"`
	FileType   sql.NullString `json:"file_type"`
	MimeType   sql.NullString `json:"mime_type"`
	FileSize   sql.NullInt64  `json:"file_size"`
	Url        sql.NullString `json:"url"`
	AltText    sql.NullString `json:"alt_text"`
	Caption    sql.NullString `json:"caption"`
	UploadedBy uuid.NullUUID  `json:"uploaded_by"`
	CreatedAt  sql.NullTime   `json:"created_at"`
}

func (q *Queries) SelectGalleryItemsByGalleryID(ctx context.Context, galleryID uuid.NullUUID) ([]SelectGalleryItemsByGalleryIDRow, error) {
	rows, err := q.query(ctx, q.selectGalleryItemsByGalleryIDStmt, selectGalleryItemsByGalleryID, galleryID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []SelectGalleryItemsByGalleryIDRow{}
	for rows.Next() {
		var i SelectGalleryItemsByGalleryIDRow
		if err := rows.Scan(
			&i.ID,
			&i.GalleryID,
			&i.MediaID,
			&i.SortOrder,
			&i.ID_2,
			&i.FileName,
			&i.FileType,
			&i.MimeType,
			&i.FileSize,
			&i.Url,
			&i.AltText,
			&i.Caption,
			&i.UploadedBy,
			&i.CreatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}
